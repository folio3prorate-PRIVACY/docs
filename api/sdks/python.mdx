---
title: "Python SDK"
description: "Official Python SDK for the Octav API"
---

import { Alert } from '/snippets/Alert.jsx.mdx'
import { Button } from '/snippets/Button.jsx.mdx'

# Python SDK

The official Octav Python SDK provides a Pythonic interface to the Octav API for data analysis and automation.

## Installation

Install via pip:

```bash
pip install octav-sdk
```

## Quick Start

### Initialize the Client

```python
from octav import OctavClient

octav = OctavClient(api_key=os.environ.get('OCTAV_API_KEY'))
```

<Alert type="warning" title="API Key Security">
Never hardcode your API key. Use environment variables or a secure configuration management system.
</Alert>

### Get Portfolio Data

```python
portfolios = octav.portfolios.list()
for portfolio in portfolios:
    print(f"{portfolio.name}: ${portfolio.total_value:,.2f}")
```

### Get Wallet Information

```python
wallet = octav.wallets.get('0xabcdef1234567890')
print(f"Total Value: ${wallet.total_value:,.2f}")
print(f"24h Change: {wallet.change_24h:.2f}%")
```

## API Reference

### Portfolios

#### List All Portfolios

```python
portfolios = octav.portfolios.list()
```

#### Get Portfolio Details

```python
portfolio = octav.portfolios.get('portfolio_123')
```

#### Create Portfolio

```python
portfolio = octav.portfolios.create(
    name='My New Portfolio',
    description='Long-term holdings',
    wallets=['0xabc...', '0xdef...']
)
```

#### Get Portfolio Performance

```python
performance = octav.portfolios.get_performance(
    'portfolio_123',
    period='30d',
    interval='day'
)

print(f"30-day change: {performance.change_percent:.2f}%")
```

### Wallets

#### Get Wallet Data

```python
wallet = octav.wallets.get(
    '0xabcdef...',
    chains=['ethereum', 'base'],
    include_nfts=True
)
```

#### List Wallets

```python
wallets = octav.wallets.list(limit=20, offset=0)
```

#### Add Wallet

```python
wallet = octav.wallets.add(
    address='0x123...',
    label='My Trading Wallet',
    chains=['ethereum', 'arbitrum']
)
```

### Transactions

#### Get Wallet Transactions

```python
from datetime import datetime, timedelta

end_date = datetime.now()
start_date = end_date - timedelta(days=30)

transactions = octav.transactions.list(
    '0xabcdef...',
    limit=100,
    type='swap',
    chain='ethereum',
    start_date=start_date.isoformat(),
    end_date=end_date.isoformat()
)
```

#### Get Transaction Details

```python
tx = octav.transactions.get('0x123abc...')
print(f"Gas Fee: ${tx.gas_fee.value_usd:.2f}")
```

## Type Hints

The SDK includes full type hints for better IDE support:

```python
from octav import OctavClient
from octav.types import Portfolio, Wallet, Transaction

octav: OctavClient = OctavClient(api_key='...')

portfolio: Portfolio = octav.portfolios.get('portfolio_123')
wallet: Wallet = octav.wallets.get('0xabc...')
```

## Error Handling

```python
from octav import OctavClient
from octav.exceptions import OctavAPIError, RateLimitError

try:
    wallet = octav.wallets.get('invalid_address')
except RateLimitError as e:
    print(f"Rate limit exceeded. Retry after {e.retry_after} seconds")
except OctavAPIError as e:
    print(f"API Error: {e.message} (Status: {e.status_code})")
```

## Pandas Integration

The SDK integrates seamlessly with pandas for data analysis:

```python
import pandas as pd

# Get transaction history
transactions = octav.transactions.list('0xabc...', limit=1000)

# Convert to DataFrame
df = pd.DataFrame([tx.to_dict() for tx in transactions])

# Analyze
print(df.groupby('type')['value_usd'].sum())
print(df.groupby('chain')['gas_fee'].mean())
```

### Performance Analysis

```python
import pandas as pd
import matplotlib.pyplot as plt

# Get performance data
performance = octav.portfolios.get_performance(
    'portfolio_123',
    period='90d',
    interval='day'
)

# Create DataFrame
df = pd.DataFrame(performance.historical_values)
df['timestamp'] = pd.to_datetime(df['timestamp'])
df.set_index('timestamp', inplace=True)

# Plot
df['value'].plot(figsize=(12, 6), title='Portfolio Value (90 days)')
plt.ylabel('Value (USD)')
plt.show()
```

## Configuration Options

```python
octav = OctavClient(
    api_key=os.environ.get('OCTAV_API_KEY'),
    base_url='https://api.octav.fi/v1',  # Optional: custom base URL
    timeout=30,  # Optional: request timeout in seconds
    retries=3,  # Optional: number of retries for failed requests
)
```

## Async Support

Use the async client for concurrent requests:

```python
import asyncio
from octav import AsyncOctavClient

async def main():
    octav = AsyncOctavClient(api_key='...')

    # Fetch multiple wallets concurrently
    wallets = await asyncio.gather(
        octav.wallets.get('0xabc...'),
        octav.wallets.get('0xdef...'),
        octav.wallets.get('0x123...')
    )

    total_value = sum(w.total_value for w in wallets)
    print(f"Total: ${total_value:,.2f}")

asyncio.run(main())
```

## Pagination

Handle paginated responses with automatic iteration:

```python
# Manual pagination
all_transactions = []
offset = 0
limit = 100

while True:
    response = octav.transactions.list(
        '0xabc...',
        limit=limit,
        offset=offset
    )

    all_transactions.extend(response)

    if len(response) < limit:
        break

    offset += limit

# Or use the iterator
for tx in octav.transactions.iter_all('0xabc...', limit=100):
    print(f"{tx.hash}: {tx.type}")
```

## Examples

### Calculate Portfolio Metrics

```python
def calculate_sharpe_ratio(portfolio_id, period='90d'):
    performance = octav.portfolios.get_performance(
        portfolio_id,
        period=period,
        interval='day'
    )

    df = pd.DataFrame(performance.historical_values)
    df['returns'] = df['value'].pct_change()

    sharpe = (df['returns'].mean() / df['returns'].std()) * (365 ** 0.5)
    return sharpe

ratio = calculate_sharpe_ratio('portfolio_123')
print(f"Sharpe Ratio: {ratio:.2f}")
```

### Export to CSV

```python
import csv

# Get transactions
transactions = octav.transactions.list('0xabc...', limit=1000)

# Export to CSV
with open('transactions.csv', 'w', newline='') as f:
    writer = csv.DictWriter(f, fieldnames=['timestamp', 'type', 'value', 'chain'])
    writer.writeheader()

    for tx in transactions:
        writer.writerow({
            'timestamp': tx.timestamp,
            'type': tx.type,
            'value': tx.value_usd,
            'chain': tx.chain
        })
```

### Monitor for Large Transactions

```python
import time

def monitor_transactions(address, threshold=10000):
    """Alert on transactions above threshold"""
    while True:
        transactions = octav.transactions.list(
            address,
            limit=10
        )

        for tx in transactions:
            if tx.value_usd > threshold:
                print(f"ðŸš¨ Large transaction detected: ${tx.value_usd:,.2f}")
                print(f"   Type: {tx.type}")
                print(f"   Hash: {tx.hash}")

        time.sleep(60)  # Check every minute

# Run monitor
monitor_transactions('0xabc...', threshold=50000)
```

## GitHub Repository

<Button href="https://github.com/octav-fi/octav-python-sdk">View on GitHub</Button>

<Alert type="info" title="Data Science Ready">
The Python SDK is designed for data analysis workflows with pandas, numpy, and matplotlib integration.
</Alert>
